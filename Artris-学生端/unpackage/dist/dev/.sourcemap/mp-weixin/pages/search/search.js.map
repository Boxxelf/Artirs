{"version":3,"file":"search.js","sources":["pages/search/search.vue","pages/search/search.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"search-page\">\n\t\t<!-- 搜索栏 -->\n\t\t<view class=\"search-bar\">\n\t\t\t<uni-icons type=\"left\" size=\"24\" color=\"#333\" @click=\"goBack\"></uni-icons>\n\t\t\t<input \n\t\t\t\tclass=\"search-input\" \n\t\t\t\tv-model=\"keyword\" \n\t\t\t\t:placeholder=\"$t('home.searchPlaceholder')\"\n\t\t\t\t@confirm=\"doSearch\"\n\t\t\t\t@input=\"onInput\"\n\t\t\t/>\n\t\t\t<button class=\"search-btn\" @click=\"doSearch\">{{ $t('common.search') }}</button>\n\t\t</view>\n\n\t\t<!-- 搜索结果 -->\n\t\t<view class=\"search-results\">\n\t\t\t<view class=\"results-header\">\n\t\t\t\t<text class=\"results-count\">{{ $t('search.found', { count: mentors.length }) }}</text>\n\t\t\t</view>\n\t\t\t<view class=\"mentor-list\">\n\t\t\t\t<view \n\t\t\t\t\tv-for=\"mentor in mentors\" \n\t\t\t\t\t:key=\"mentor._id\"\n\t\t\t\t\tclass=\"mentor-item\"\n\t\t\t\t\t@click=\"goToMentorDetail(mentor._id)\"\n\t\t\t\t>\n\t\t\t\t\t<image class=\"mentor-avatar\" :src=\"mentor.avatar\" mode=\"aspectFill\"></image>\n\t\t\t\t\t<view class=\"mentor-info\">\n\t\t\t\t\t\t<text class=\"mentor-name\">{{ mentor.name }}</text>\n\t\t\t\t\t\t<text class=\"mentor-school\">{{ mentor.school }} · {{ mentor.degree }}</text>\n\t\t\t\t\t\t<view class=\"mentor-footer\">\n\t\t\t\t\t\t\t<text class=\"mentor-price\">¥{{ mentor.price }}/{{ $t('mentor.pricePerSession') }}</text>\n\t\t\t\t\t\t\t<button class=\"book-btn\" @click.stop=\"goToBooking(mentor._id)\">\n\t\t\t\t\t\t\t\t{{ $t('mentor.bookNow') }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<view v-if=\"loading\" class=\"loading\">\n\t\t\t\t<text>{{ $t('common.loading') }}</text>\n\t\t\t</view>\n\n\t\t\t<view v-if=\"!loading && mentors.length === 0 && keyword\" class=\"empty\">\n\t\t\t\t<text>{{ $t('search.noResults') }}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 底部导航 -->\n\t\t<BottomNav />\n\t</view>\n</template>\n\n<script>\n\timport BottomNav from '@/components/BottomNav/BottomNav.vue'\n\t\n\texport default {\n\t\tcomponents: {\n\t\t\tBottomNav\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tkeyword: '',\n\t\t\t\tmentors: [],\n\t\t\t\tloading: false\n\t\t\t}\n\t\t},\n\t\tonLoad(options) {\n\t\t\tif (options.keyword) {\n\t\t\t\tthis.keyword = decodeURIComponent(options.keyword)\n\t\t\t\tthis.doSearch()\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tonInput(e) {\n\t\t\t\tthis.keyword = e.detail.value\n\t\t\t},\n\t\t\tasync doSearch() {\n\t\t\t\tif (!this.keyword.trim()) return\n\t\t\t\t\n\t\t\t\tthis.loading = true\n\t\t\t\ttry {\n\t\t\t\t\tconst res = await uniCloud.callFunction({\n\t\t\t\t\t\tname: 'mentors',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\taction: 'getList',\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tkeyword: this.keyword,\n\t\t\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\t\t\tpageSize: 20\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tif (res.result.code === 0) {\n\t\t\t\t\t\tthis.mentors = res.result.data || []\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('搜索失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '搜索失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t} finally {\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t},\n\t\t\tgoToMentorDetail(mentorId) {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/mentor-detail/mentor-detail?id=${mentorId}`\n\t\t\t\t})\n\t\t\t},\n\t\t\tgoToBooking(mentorId) {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: `/pages/booking/booking?mentorId=${mentorId}`\n\t\t\t\t})\n\t\t\t},\n\t\t\tgoBack() {\n\t\t\t\tuni.navigateBack()\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.search-page {\n\t\tmin-height: 100vh;\n\t\tbackground-color: #f5f6f8;\n\t\tpadding-bottom: 120rpx;\n\t}\n\n\t.search-bar {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t\tpadding: 24rpx 32rpx;\n\t\tbackground-color: #ffffff;\n\t\tborder-bottom: 1px solid #e5e5e5;\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tz-index: 100;\n\t}\n\n\t.search-input {\n\t\tflex: 1;\n\t\tbackground-color: #f5f6f8;\n\t\tborder: none;\n\t\tborder-radius: 50rpx;\n\t\tpadding: 16rpx 32rpx;\n\t\tfont-size: 28rpx;\n\t}\n\n\t.search-btn {\n\t\tbackground-color: #00B4D8;\n\t\tcolor: #ffffff;\n\t\tborder: none;\n\t\tborder-radius: 50rpx;\n\t\tpadding: 16rpx 32rpx;\n\t\tfont-size: 28rpx;\n\t\tfont-weight: bold;\n\t}\n\n\t.search-results {\n\t\tpadding: 32rpx;\n\t}\n\n\t.results-header {\n\t\tmargin-bottom: 32rpx;\n\t}\n\n\t.results-count {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t}\n\n\t.mentor-list {\n\t}\n\n\t.mentor-item {\n\t\tbackground: rgba(255, 255, 255, 0.9);\n\t\tbackdrop-filter: blur(12px);\n\t\tborder-radius: 24rpx;\n\t\tpadding: 32rpx;\n\t\tmargin-bottom: 32rpx;\n\t\tdisplay: flex;\n\t\tgap: 32rpx;\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.mentor-avatar {\n\t\twidth: 128rpx;\n\t\theight: 128rpx;\n\t\tborder-radius: 50%;\n\t}\n\n\t.mentor-info {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t}\n\n\t.mentor-name {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t}\n\n\t.mentor-school {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999;\n\t}\n\n\t.mentor-footer {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-top: 16rpx;\n\t}\n\n\t.mentor-price {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #00B4D8;\n\t}\n\n\t.book-btn {\n\t\tbackground-color: #00B4D8;\n\t\tcolor: #ffffff;\n\t\tborder: none;\n\t\tborder-radius: 50rpx;\n\t\tpadding: 12rpx 32rpx;\n\t\tfont-size: 24rpx;\n\t\tfont-weight: bold;\n\t}\n\n\t.loading, .empty {\n\t\ttext-align: center;\n\t\tpadding: 64rpx;\n\t\tcolor: #999;\n\t\tfont-size: 28rpx;\n\t}\n\n</style>\n","import MiniProgramPage from '/Users/tinajiang/Documents/HBuilderProjects/Artris-学生端/pages/search/search.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uni"],"mappings":";;AAwDC,MAAK,YAAa,MAAW;AAE7B,MAAK,YAAU;AAAA,EACd,YAAY;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,SAAS,CAAE;AAAA,MACX,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,QAAI,QAAQ,SAAS;AACpB,WAAK,UAAU,mBAAmB,QAAQ,OAAO;AACjD,WAAK,SAAS;AAAA,IACf;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,QAAQ,GAAG;AACV,WAAK,UAAU,EAAE,OAAO;AAAA,IACxB;AAAA,IACD,MAAM,WAAW;AAChB,UAAI,CAAC,KAAK,QAAQ,KAAM;AAAE;AAE1B,WAAK,UAAU;AACf,UAAI;AACH,cAAM,MAAM,MAAMA,cAAQ,GAAC,aAAa;AAAA,UACvC,MAAM;AAAA,UACN,MAAM;AAAA,YACL,QAAQ;AAAA,YACR,MAAM;AAAA,cACL,SAAS,KAAK;AAAA,cACd,MAAM;AAAA,cACN,UAAU;AAAA,YACX;AAAA,UACD;AAAA,SACA;AAED,YAAI,IAAI,OAAO,SAAS,GAAG;AAC1B,eAAK,UAAU,IAAI,OAAO,QAAQ,CAAC;AAAA,QACpC;AAAA,MACC,SAAO,OAAO;AACfC,sBAAAA,MAAc,MAAA,SAAA,kCAAA,SAAS,KAAK;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF,UAAU;AACT,aAAK,UAAU;AAAA,MAChB;AAAA,IACA;AAAA,IACD,iBAAiB,UAAU;AAC1BA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,yCAAyC,QAAQ;AAAA,OACtD;AAAA,IACD;AAAA,IACD,YAAY,UAAU;AACrBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,mCAAmC,QAAQ;AAAA,OAChD;AAAA,IACD;AAAA,IACD,SAAS;AACRA,oBAAAA,MAAI,aAAa;AAAA,IAClB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1HD,GAAG,WAAW,eAAe;"}