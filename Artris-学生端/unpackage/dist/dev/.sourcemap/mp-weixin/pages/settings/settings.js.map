{"version":3,"file":"settings.js","sources":["pages/settings/settings.vue","pages/settings/settings.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"settings-page\">\n\t\t<!-- 导航栏 -->\n\t\t<view class=\"navbar\">\n\t\t\t<uni-icons type=\"left\" size=\"24\" color=\"#333\" @click=\"goBack\"></uni-icons>\n\t\t\t<text class=\"nav-title\">{{ $t('settings.title') }}</text>\n\t\t\t<view class=\"nav-placeholder\"></view>\n\t\t</view>\n\n\t\t<view class=\"content\">\n\t\t\t<!-- 语言设置 -->\n\t\t\t<view class=\"setting-section\">\n\t\t\t\t<view class=\"setting-item\">\n\t\t\t\t\t<text class=\"setting-label\">{{ $t('settings.language') }}</text>\n\t\t\t\t\t<view class=\"setting-value\" @click=\"showLanguagePicker\">\n\t\t\t\t\t\t<text>{{ currentLanguage === 'zh' ? $t('settings.chinese') : $t('settings.english') }}</text>\n\t\t\t\t\t\t<uni-icons type=\"right\" size=\"18\" color=\"#ccc\"></uni-icons>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 通知设置 -->\n\t\t\t<view class=\"setting-section\">\n\t\t\t\t<view class=\"setting-item\">\n\t\t\t\t\t<text class=\"setting-label\">{{ $t('settings.notifications') }}</text>\n\t\t\t\t\t<switch :checked=\"notificationsEnabled\" @change=\"toggleNotifications\" color=\"#00B4D8\"></switch>\n\t\t\t\t</view>\n\t\t\t</view>\n\n\t\t\t<!-- 退出登录 -->\n\t\t\t<view class=\"setting-section\">\n\t\t\t\t<button class=\"logout-btn\" @click=\"handleLogout\">\n\t\t\t\t\t{{ $t('settings.logout') }}\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport i18n from '@/utils/i18n.js'\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcurrentLanguage: 'zh',\n\t\t\t\tnotificationsEnabled: true\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tthis.currentLanguage = i18n.getLanguage()\n\t\t},\n\t\tmethods: {\n\t\t\tgoBack() {\n\t\t\t\tuni.navigateBack()\n\t\t\t},\n\t\t\tshowLanguagePicker() {\n\t\t\t\tuni.showActionSheet({\n\t\t\t\t\titemList: [this.$t('settings.chinese'), this.$t('settings.english')],\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconst lang = res.tapIndex === 0 ? 'zh' : 'en'\n\t\t\t\t\t\ti18n.setLanguage(lang)\n\t\t\t\t\t\tthis.currentLanguage = lang\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '语言已切换',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// 重新加载页面以应用新语言\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\turl: '/pages/home/home'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\ttoggleNotifications(e) {\n\t\t\t\tthis.notificationsEnabled = e.detail.value\n\t\t\t},\n\t\t\tasync handleLogout() {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: '确定要退出登录吗？',\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t// 调用 uni-id 退出登录接口\n\t\t\t\t\t\t\t\tconst uniIdCo = uniCloud.importObject('uni-id-co', {\n\t\t\t\t\t\t\t\t\tcustomUI: true\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tawait uniIdCo.logout()\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\tconsole.error('退出登录失败:', error)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 清除本地存储\n\t\t\t\t\t\t\tuni.removeStorageSync('userInfo')\n\t\t\t\t\t\t\tuni.removeStorageSync('uni_id_token')\n\t\t\t\t\t\t\tuni.removeStorageSync('uni_id_token_expired')\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '已退出登录',\n\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 跳转到首页\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\t\t\t\turl: '/pages/home/home'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.settings-page {\n\t\tmin-height: 100vh;\n\t\tbackground-color: #f5f6f8;\n\t}\n\n\t.navbar {\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tpadding: 20rpx 32rpx;\n\t\tbackground: rgba(255, 255, 255, 0.95);\n\t\tbackdrop-filter: blur(10px);\n\t\tborder-bottom: 1px solid #e5e5e5;\n\t\tz-index: 100;\n\t}\n\n\t.nav-title {\n\t\tfont-size: 36rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t}\n\n\t.nav-placeholder {\n\t\twidth: 48rpx;\n\t}\n\n\t.content {\n\t\tpadding: 32rpx;\n\t}\n\n\t.setting-section {\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 24rpx;\n\t\tpadding: 32rpx;\n\t\tmargin-bottom: 32rpx;\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.05);\n\t}\n\n\t.setting-item {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\n\t.setting-label {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: 500;\n\t\tcolor: #333;\n\t}\n\n\t.setting-value {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 16rpx;\n\t\tfont-size: 28rpx;\n\t\tcolor: #666;\n\t}\n\n\t.logout-btn {\n\t\twidth: 100%;\n\t\tbackground-color: transparent;\n\t\tcolor: #ff6b6b;\n\t\tborder: 1px solid #ff6b6b;\n\t\tborder-radius: 24rpx;\n\t\tpadding: 32rpx;\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t}\n</style>\n","import MiniProgramPage from '/Users/tinajiang/Documents/HBuilderProjects/Artris-学生端/pages/settings/settings.vue'\nwx.createPage(MiniProgramPage)"],"names":["i18n","uni","uniCloud"],"mappings":";;;AA0CC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,iBAAiB;AAAA,MACjB,sBAAsB;AAAA,IACvB;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,kBAAkBA,WAAI,KAAC,YAAY;AAAA,EACxC;AAAA,EACD,SAAS;AAAA,IACR,SAAS;AACRC,oBAAAA,MAAI,aAAa;AAAA,IACjB;AAAA,IACD,qBAAqB;AACpBA,oBAAAA,MAAI,gBAAgB;AAAA,QACnB,UAAU,CAAC,KAAK,GAAG,kBAAkB,GAAG,KAAK,GAAG,kBAAkB,CAAC;AAAA,QACnE,SAAS,CAAC,QAAQ;AACjB,gBAAM,OAAO,IAAI,aAAa,IAAI,OAAO;AACzCD,qBAAI,KAAC,YAAY,IAAI;AACrB,eAAK,kBAAkB;AACvBC,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AAED,qBAAW,MAAM;AAChBA,0BAAAA,MAAI,SAAS;AAAA,cACZ,KAAK;AAAA,aACL;AAAA,UACD,GAAE,GAAI;AAAA,QACR;AAAA,OACA;AAAA,IACD;AAAA,IACD,oBAAoB,GAAG;AACtB,WAAK,uBAAuB,EAAE,OAAO;AAAA,IACrC;AAAA,IACD,MAAM,eAAe;AACpBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,OAAO,QAAQ;AACvB,cAAI,IAAI,SAAS;AAChB,gBAAI;AAEH,oBAAM,UAAUC,cAAAA,GAAS,aAAa,aAAa;AAAA,gBAClD,UAAU;AAAA,eACV;AACD,oBAAM,QAAQ,OAAO;AAAA,YACpB,SAAO,OAAO;AACfD,4BAAAA,MAAA,MAAA,SAAA,qCAAc,WAAW,KAAK;AAAA,YAC/B;AAGAA,0BAAG,MAAC,kBAAkB,UAAU;AAChCA,0BAAG,MAAC,kBAAkB,cAAc;AACpCA,0BAAG,MAAC,kBAAkB,sBAAsB;AAE5CA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,aACN;AAGD,uBAAW,MAAM;AAChBA,4BAAAA,MAAI,SAAS;AAAA,gBACZ,KAAK;AAAA,eACL;AAAA,YACD,GAAE,GAAI;AAAA,UACR;AAAA,QACD;AAAA,OACA;AAAA,IACF;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHD,GAAG,WAAW,eAAe;"}